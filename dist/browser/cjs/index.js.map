{"version":3,"file":"index.js","sources":["../../../src/index.js"],"sourcesContent":["import {DomScripter} from 'dom-scripter'\n\nconst scripter = new DomScripter()\n\nfunction Metapatcher() {\n  this.configure()\n\n  // prevent ms browsers to request browserconfig.xml file on openning\n  this.set('meta', 'name', {name: 'msapplication-config', content: 'none'})\n}\n\nMetapatcher.prototype.defaultSettings = {\n  structuredData: {enabled: true},\n  androidChromeIcons: {enabled: true},\n  msTags: {enabled: true},\n  safariTags: {enabled: true},\n  appleTags: {enabled: true},\n  openGraphTags: {enabled: true},\n  twitterTags: {enabled: true},\n  facebookTags: {enabled: true}\n}\nMetapatcher.prototype.mimeTypesByExtension = {\n  'svg': 'image/svg+xml',\n  'png': 'image/png',\n  'jpg': 'image/jpeg',\n  'jpeg': 'image/jpeg',\n  'ico': 'image/x-icon',\n  'gif': 'image/gif',\n  'webp': 'image/webp',\n  'bmp': 'image/bmp'\n}\nMetapatcher.prototype.prioritizeMethods = ['preload', 'prefetch', 'preconnect', 'dns-prefetch']\nMetapatcher.prototype.validAndroidChromeIconSizes = [\n  '72x72', '96x96', '128x128', '144x144', '152x152', '192x192', '384x384', '512x512'\n]\nMetapatcher.prototype.validAppleTouchIconSizes = [\n  '120x120', '180x180', '152x152', '167x167', '1024x1024'\n]\nMetapatcher.prototype.validMSTileIconSizes = [\n  '70x70', '150x150', '310x150', '310x310'\n]\nMetapatcher.prototype.mstilesNamingMap = {\n  '70x70': 'msapplication-square70x70logo',\n  '150x150': 'msapplication-square150x150logo',\n  '310x310': 'msapplication-square310x310logo',\n  '310x150': 'msapplication-wide310x150logo'\n}\nMetapatcher.prototype.reImageSizeFromStr = /[0-9]{2,3}x[0-9]{2,3}/g\n\nMetapatcher.prototype.setFavicon = function setFavicon(path) {\n  const mime = this.findMimeType(path)\n  if (!mime) return undefined\n  return this.set('link', 'rel', {rel: 'shortcut icon', href: path, type: mime})\n}\n\nMetapatcher.prototype.setProjectMeta = function setProjectMeta(obj) {\n  if (!this.isObject(obj)) return undefined\n\n  if (obj.name) {\n    if (this.settings.msTags.enabled) {\n      this.set('meta', 'name', {name: 'application-name', content: obj.name})\n    }\n    if (this.settings.safariTags.enabled) {\n      this.setSafariMobileWebApp({name: obj.name})\n    }\n    if (this.settings.openGraphTags.enabled) {\n      this.set('meta', 'property', {property: 'og:site_name', content: obj.name})\n    }\n  }\n\n  if (obj.url) {\n    if (this.settings.msTags.enabled) {\n      this.set('meta', 'name', {name: 'msapplication-starturl', content: obj.url})\n    }\n  }\n\n  if (obj.logo) {\n    if (this.settings.structuredData.enabled) {\n      scripter.injectjsonld({\n        '@type': 'Organization',\n        logo: obj.logo,\n        url: obj.url\n      }, {'data-mptype': 'sdorg', location: 'headEnd', id: 'metapatcher-project-meta-organization'})\n    }\n  }\n\n  if (obj.primaryColor) {\n    this.set('meta', 'name', {name: 'theme-color', content: obj.primaryColor})\n  }\n\n  if (obj.backgroundColor) {\n    if (this.settings.msTags.enabled) {\n      this.set('meta', 'name', {name: 'msapplication-TileColor', content: obj.backgroundColor})\n    }\n  }\n\n  return this\n}\n\nMetapatcher.prototype.robots = function robots(directives) {\n  return this.set('meta', 'name', {name: 'robots', content: directives})\n}\n\nMetapatcher.prototype.prioritize = function prioritize(url, method) {\n  if (this.prioritizeMethods.indexOf(method) === -1) return undefined\n  return this.set('meta', undefined, {name: method, content: url})\n}\n\nMetapatcher.prototype.removeAllPrioritizations = function removeAllPrioritizations() {\n  for (var i = 0; i < this.prioritizeMethods.length; i++) {\n    const method = this.prioritizeMethods[i]\n    const elems = document.querySelectorAll('meta[name=\"' + method + '\"]')\n    if (elems && elems.length > 0) {\n      for (let i = 0; i < elems.length; i++) {\n        elems[i].parentNode.removeChild(elems[i])\n      }\n    }\n  }\n\n  return this\n}\n\nMetapatcher.prototype.setIcons = function setIcons(list) {\n  const self = this\n  const validTypes = Object.values(self.mimeTypesByExtension)\n\n  list.map(function(url) {\n    const type = self.findMimeType(url)\n    const sizeMatches = url.match(self.reImageSizeFromStr)\n\n    if (sizeMatches && sizeMatches.length > 0 && type && validTypes.indexOf(type) !== -1) {\n      const size = sizeMatches[0]\n      // android chrome icons\n      if (self.validAndroidChromeIconSizes.indexOf(size) !== -1 &&\n      self.settings.androidChromeIcons.enabled) {\n        self.set('link', undefined, {rel: 'icon', href: url, sizes: size, type: type})\n      }\n      // apple touch icons\n      if (self.validAppleTouchIconSizes.indexOf(size) !== -1 &&\n      self.settings.appleTags.enabled) {\n        self.set('link', undefined, {rel: 'apple-touch-icon', href: url, sizes: size})\n      }\n      // mstile icons\n      if (self.validMSTileIconSizes.indexOf(size) !== -1 &&\n      self.settings.msTags.enabled) {\n        self.set('meta', undefined, {name: self.mstilesNamingMap[size], content: url})\n      }\n    }\n  })\n\n  return self\n}\n\n// set canonicals one by one\nMetapatcher.prototype.setCanonical = function setCanonical(url) {\n  return this.set('link', undefined, {rel: 'canonical', href: url})\n}\n// and remove all at once\nMetapatcher.prototype.removeAllCanonicals = function removeAllCanonicals() {\n  const elems = document.querySelectorAll('link[rel=\"canonical\"]')\n  if (elems && elems.length > 0) {\n    for (let i = 0; i < elems.length; i++) {\n      elems[i].parentNode.removeChild(elems[i])\n    }\n  }\n  return this\n}\n\n// set local versions one by one\nMetapatcher.prototype.setLocalVersion = function setLocalVersion(locale, url, isActiveLocale = false) {\n  this.set('link', undefined, {rel: 'alternate', href: url, hreflang: locale})\n\n  if (this.settings.openGraphTags.enabled) {\n    const suffix = isActiveLocale ? '' : ':alternate'\n    this.set('meta', undefined, {property: 'og:locale' + suffix, content: locale})\n  }\n\n  return this\n}\n// and remove all at once\nMetapatcher.prototype.removeAllLocalVersions = function removeAllLocalVersions() {\n  const elems = document.querySelectorAll('link[rel=\"alternate\"]')\n  if (elems && elems.length > 0) {\n    for (let i = 0; i < elems.length; i++) {\n      elems2[i].parentNode.removeChild(elems2[i])\n    }\n  }\n\n  if (this.settings.openGraphTags.enabled) {\n    const elems2 = document.querySelectorAll('meta[property=\"og:locale:alternate\"]')\n    if (elems2 && elems2.length > 0) {\n      for (let j = 0; j < elems2.length; j++) {\n        elems2[j].parentNode.removeChild(elems2[j])\n      }\n    }\n\n    const elem = document.querySelector('meta[property=\"og:locale\"]')\n    if (elem) {\n      elem.parentNode.removeChild(elem)\n    }\n  }\n\n  return this\n}\n\nMetapatcher.prototype.setPageMeta = function setPageMeta(obj) {\n  if (!this.isObject(obj)) return this\n\n  if (obj.title) {\n    document.title = obj.title\n\n    if (this.settings.openGraphTags.enabled) {\n      this.set('meta', 'property', {property: 'og:title', content: obj.title})\n    }\n\n    if (this.settings.twitterTags.enabled) {\n      this.set('meta', 'name', {name: 'twitter:title', content: obj.title})\n    }\n  }\n\n  if (obj.description) {\n    this.set('meta', 'name', {name: 'description', content: obj.description})\n\n    if (this.settings.openGraphTags.enabled) {\n      this.set('meta', 'property', {property: 'og:description', content: obj.description})\n    }\n\n    if (this.settings.twitterTags.enabled) {\n      this.set('meta', 'name', {name: 'twitter:description', content: obj.description})\n    }\n  }\n\n  if (obj.url) {\n    if (this.settings.openGraphTags.enabled) {\n      this.set('meta', 'property', {property: 'og:url', content: obj.url})\n    }\n  }\n\n  if (obj.image) {\n    const imgobj = this.formatImageInput(obj.image)\n    if (this.settings.openGraphTags.enabled) {\n      this.set('meta', 'property', {property: 'og:image', content: imgobj.url})\n\n      if (imgobj.width) {\n        this.set('meta', 'property', {property: 'og:image:width', content: imgobj.width})\n      }\n\n      if (imgobj.height) {\n        this.set('meta', 'property', {property: 'og:image:height', content: imgobj.height})\n      }\n    }\n\n    if (this.settings.twitterTags.enabled) {\n      this.set('meta', 'name', {name: 'twitter:image', content: imgobj.url})\n    }\n  }\n\n  if (obj.locale) {\n    document.querySelector('html').setAttribute('lang', obj.locale)\n\n    if (this.settings.openGraphTags.enabled) {\n      this.set('meta', 'property', {property: 'og:locale', content: obj.locale.replace('-', '_')})\n    }\n  }\n\n  if (obj.localVersions) {\n    Object\n      .keys(obj.localVersions)\n      .map(\n        l => this.setLocalVersion(\n          l, obj.localVersions[l], obj.locale && obj.locale == l\n        )\n      )\n  }\n\n  if (obj.canonicals) {\n    obj.canonicals.map(u => this.setCanonical(u))\n  }\n\n  return this\n}\n\nMetapatcher.prototype.setSafariMobileWebApp = function setSafariMobileWebApp(obj) {\n  if (!this.settings.appleTags.enabled) return this\n\n  this.set('meta', 'name', {name: 'apple-mobile-web-app-capable', content: 'yes'})\n\n  if (obj.name) {\n    this.set('meta', 'name', {name: 'apple-mobile-web-app-title', content: obj.name})\n  }\n\n  if (obj.statusBarStyle) {\n    this.set('meta', 'name', {name: 'apple-mobile-web-app-status-bar-style', content: obj.statusBarStyle})\n  }\n\n  return this\n}\n\nMetapatcher.prototype.setSafariPinnedTab = function setSafariPinnedTab(url, color) {\n  return this.set('link', 'rel', {rel: 'mask-icon', href: url, color: color || 'black'})\n}\n\nMetapatcher.prototype.setFacebookMeta = function setFacebookMeta(obj) {\n  if (obj.appID) {\n    this.set('meta', 'property', {property: 'fb:app_id', content: obj.appID})\n  }\n  return this\n}\n\nMetapatcher.prototype.setTwitterMeta = function setTwitterMeta(obj) {\n  if (!this.settings.twitterTags.enabled) return this\n\n  if (obj.card)\n    this.set('meta', 'name', {name: 'twitter:card', content: obj.card})\n\n  if (obj.site)\n    this.set('meta', 'name', {name: 'twitter:site', content: obj.site})\n\n  if (obj.creator)\n    this.set('meta', 'name', {name: 'twitter:creator', content: obj.creator})\n}\n\nMetapatcher.prototype.breadcrumb = function breadcrumb(data, attrs = {}) {\n  if (!this.settings.structuredData.enabled) return this\n\n  const o = {\n    '@type': 'BreadcrumbList',\n    'itemListElement': data.map(function(obj, index) {\n      return {\n        '@type': 'ListItem',\n        'position': index + 1,\n        'name': obj.title,\n        'item': obj.url\n      }\n    })\n  }\n\n  scripter.injectjsonld(o, Object.assign({}, {'data-mptype': 'sdb', location: 'headEnd'}, attrs))\n\n  return this\n}\n\nMetapatcher.prototype.formatImageInput = function formatImageInput(input) {\n  if (typeof input == 'string') return {url: input}\n  else if (this.isObject(input)) return {\n    url: input.url,\n    width: input.width,\n    height: input.height\n  }\n  else return {}\n}\n\nMetapatcher.prototype.findMimeType = function findMimeType(path) {\n  const lastind = path.lastIndexOf('.')\n  if (lastind < 1) return undefined\n\n  const ext = path.slice(lastind + 1)\n  if (!ext) return undefined\n\n  return this.mimeTypesByExtension[ext] || undefined\n}\n\nMetapatcher.prototype.set = function set(tag, id, attrs = {}) {\n  if (id) {\n    const alreadyExist = this.hasElement(tag + '[' + id + '=\"' + attrs[id] + '\"]')\n    if (alreadyExist) alreadyExist.parentNode.removeChild(alreadyExist)\n  }\n\n  const elem = this.createElement(tag, attrs)\n\n  this.patch(elem)\n\n  return elem\n}\n\nMetapatcher.prototype.hasElement = function hasElement(query) {\n  return document.querySelector(query)\n}\n\nMetapatcher.prototype.createElement = function createElement(tag, attrs) {\n  const elem = document.createElement(tag)\n  if (this.isObject(attrs)) {\n    Object.keys(attrs).map(attr => elem.setAttribute(attr, attrs[attr]))\n  }\n  return elem\n}\n\nMetapatcher.prototype.patch = function patch(elem) {\n  document.getElementsByTagName('head')[0].insertBefore(elem, null)\n}\n\nMetapatcher.prototype.configure = function configure(userSettings = {}) {\n  const defaultSettings = this.defaultSettings\n  this.settings = Object\n    .keys(this.defaultSettings)\n    .reduce(function(memo, name) {\n      memo[name] = userSettings[name] || (defaultSettings[name] || {})\n      return memo\n    }, {})\n}\n\nMetapatcher.prototype.isObject = function isObject(v) {\n  return Object.prototype.toString.call(v) === '[object Object]'\n}\n\nexport default new Metapatcher()\n"],"names":["scripter","DomScripter","Metapatcher","configure","set","name","content","prototype","defaultSettings","structuredData","enabled","androidChromeIcons","msTags","safariTags","appleTags","openGraphTags","twitterTags","facebookTags","mimeTypesByExtension","prioritizeMethods","validAndroidChromeIconSizes","validAppleTouchIconSizes","validMSTileIconSizes","mstilesNamingMap","reImageSizeFromStr","setFavicon","path","mime","findMimeType","undefined","rel","href","type","setProjectMeta","obj","isObject","settings","setSafariMobileWebApp","property","url","logo","injectjsonld","location","id","primaryColor","backgroundColor","robots","directives","prioritize","method","_indexOfInstanceProperty","removeAllPrioritizations","i","length","elems","document","querySelectorAll","parentNode","removeChild","setIcons","list","self","validTypes","_Object$values","sizeMatches","match","size","sizes","setCanonical","removeAllCanonicals","setLocalVersion","locale","isActiveLocale","hreflang","suffix","removeAllLocalVersions","elems2","j","elem","querySelector","setPageMeta","title","description","image","imgobj","formatImageInput","width","height","setAttribute","replace","localVersions","l","canonicals","u","statusBarStyle","setSafariPinnedTab","color","setFacebookMeta","appID","setTwitterMeta","card","site","creator","breadcrumb","data","attrs","o","_mapInstanceProperty","index","_Object$assign","input","lastind","_lastIndexOfInstanceProperty","ext","_sliceInstanceProperty","tag","alreadyExist","hasElement","createElement","patch","query","attr","getElementsByTagName","insertBefore","userSettings","_reduceInstanceProperty","memo","v","Object","toString","call"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,QAAQ,GAAG,IAAIC,uBAAJ,EAAjB;;AAEA,SAASC,WAAT,GAAuB;AACrB,OAAKC,SAAL,GADqB;;AAIrB,OAAKC,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,IAAAA,IAAI,EAAE,sBAAP;AAA+BC,IAAAA,OAAO,EAAE;AAAxC,GAAzB;AACD;;AAEDJ,WAAW,CAACK,SAAZ,CAAsBC,eAAtB,GAAwC;AACtCC,EAAAA,cAAc,EAAE;AAACC,IAAAA,OAAO,EAAE;AAAV,GADsB;AAEtCC,EAAAA,kBAAkB,EAAE;AAACD,IAAAA,OAAO,EAAE;AAAV,GAFkB;AAGtCE,EAAAA,MAAM,EAAE;AAACF,IAAAA,OAAO,EAAE;AAAV,GAH8B;AAItCG,EAAAA,UAAU,EAAE;AAACH,IAAAA,OAAO,EAAE;AAAV,GAJ0B;AAKtCI,EAAAA,SAAS,EAAE;AAACJ,IAAAA,OAAO,EAAE;AAAV,GAL2B;AAMtCK,EAAAA,aAAa,EAAE;AAACL,IAAAA,OAAO,EAAE;AAAV,GANuB;AAOtCM,EAAAA,WAAW,EAAE;AAACN,IAAAA,OAAO,EAAE;AAAV,GAPyB;AAQtCO,EAAAA,YAAY,EAAE;AAACP,IAAAA,OAAO,EAAE;AAAV;AARwB,CAAxC;AAUAR,WAAW,CAACK,SAAZ,CAAsBW,oBAAtB,GAA6C;AAC3C,SAAO,eADoC;AAE3C,SAAO,WAFoC;AAG3C,SAAO,YAHoC;AAI3C,UAAQ,YAJmC;AAK3C,SAAO,cALoC;AAM3C,SAAO,WANoC;AAO3C,UAAQ,YAPmC;AAQ3C,SAAO;AARoC,CAA7C;AAUAhB,WAAW,CAACK,SAAZ,CAAsBY,iBAAtB,GAA0C,CAAC,SAAD,EAAY,UAAZ,EAAwB,YAAxB,EAAsC,cAAtC,CAA1C;AACAjB,WAAW,CAACK,SAAZ,CAAsBa,2BAAtB,GAAoD,CAClD,OADkD,EACzC,OADyC,EAChC,SADgC,EACrB,SADqB,EACV,SADU,EACC,SADD,EACY,SADZ,EACuB,SADvB,CAApD;AAGAlB,WAAW,CAACK,SAAZ,CAAsBc,wBAAtB,GAAiD,CAC/C,SAD+C,EACpC,SADoC,EACzB,SADyB,EACd,SADc,EACH,WADG,CAAjD;AAGAnB,WAAW,CAACK,SAAZ,CAAsBe,oBAAtB,GAA6C,CAC3C,OAD2C,EAClC,SADkC,EACvB,SADuB,EACZ,SADY,CAA7C;AAGApB,WAAW,CAACK,SAAZ,CAAsBgB,gBAAtB,GAAyC;AACvC,WAAS,+BAD8B;AAEvC,aAAW,iCAF4B;AAGvC,aAAW,iCAH4B;AAIvC,aAAW;AAJ4B,CAAzC;AAMArB,WAAW,CAACK,SAAZ,CAAsBiB,kBAAtB,GAA2C,wBAA3C;;AAEAtB,WAAW,CAACK,SAAZ,CAAsBkB,UAAtB,GAAmC,SAASA,UAAT,CAAoBC,IAApB,EAA0B;AAC3D,MAAMC,IAAI,GAAG,KAAKC,YAAL,CAAkBF,IAAlB,CAAb;AACA,MAAI,CAACC,IAAL,EAAW,OAAOE,SAAP;AACX,SAAO,KAAKzB,GAAL,CAAS,MAAT,EAAiB,KAAjB,EAAwB;AAAC0B,IAAAA,GAAG,EAAE,eAAN;AAAuBC,IAAAA,IAAI,EAAEL,IAA7B;AAAmCM,IAAAA,IAAI,EAAEL;AAAzC,GAAxB,CAAP;AACD,CAJD;;AAMAzB,WAAW,CAACK,SAAZ,CAAsB0B,cAAtB,GAAuC,SAASA,cAAT,CAAwBC,GAAxB,EAA6B;AAClE,MAAI,CAAC,KAAKC,QAAL,CAAcD,GAAd,CAAL,EAAyB,OAAOL,SAAP;;AAEzB,MAAIK,GAAG,CAAC7B,IAAR,EAAc;AACZ,QAAI,KAAK+B,QAAL,CAAcxB,MAAd,CAAqBF,OAAzB,EAAkC;AAChC,WAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,QAAAA,IAAI,EAAE,kBAAP;AAA2BC,QAAAA,OAAO,EAAE4B,GAAG,CAAC7B;AAAxC,OAAzB;AACD;;AACD,QAAI,KAAK+B,QAAL,CAAcvB,UAAd,CAAyBH,OAA7B,EAAsC;AACpC,WAAK2B,qBAAL,CAA2B;AAAChC,QAAAA,IAAI,EAAE6B,GAAG,CAAC7B;AAAX,OAA3B;AACD;;AACD,QAAI,KAAK+B,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,WAAKN,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,QAAAA,QAAQ,EAAE,cAAX;AAA2BhC,QAAAA,OAAO,EAAE4B,GAAG,CAAC7B;AAAxC,OAA7B;AACD;AACF;;AAED,MAAI6B,GAAG,CAACK,GAAR,EAAa;AACX,QAAI,KAAKH,QAAL,CAAcxB,MAAd,CAAqBF,OAAzB,EAAkC;AAChC,WAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,QAAAA,IAAI,EAAE,wBAAP;AAAiCC,QAAAA,OAAO,EAAE4B,GAAG,CAACK;AAA9C,OAAzB;AACD;AACF;;AAED,MAAIL,GAAG,CAACM,IAAR,EAAc;AACZ,QAAI,KAAKJ,QAAL,CAAc3B,cAAd,CAA6BC,OAAjC,EAA0C;AACxCV,MAAAA,QAAQ,CAACyC,YAAT,CAAsB;AACpB,iBAAS,cADW;AAEpBD,QAAAA,IAAI,EAAEN,GAAG,CAACM,IAFU;AAGpBD,QAAAA,GAAG,EAAEL,GAAG,CAACK;AAHW,OAAtB,EAIG;AAAC,uBAAe,OAAhB;AAAyBG,QAAAA,QAAQ,EAAE,SAAnC;AAA8CC,QAAAA,EAAE,EAAE;AAAlD,OAJH;AAKD;AACF;;AAED,MAAIT,GAAG,CAACU,YAAR,EAAsB;AACpB,SAAKxC,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,MAAAA,IAAI,EAAE,aAAP;AAAsBC,MAAAA,OAAO,EAAE4B,GAAG,CAACU;AAAnC,KAAzB;AACD;;AAED,MAAIV,GAAG,CAACW,eAAR,EAAyB;AACvB,QAAI,KAAKT,QAAL,CAAcxB,MAAd,CAAqBF,OAAzB,EAAkC;AAChC,WAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,QAAAA,IAAI,EAAE,yBAAP;AAAkCC,QAAAA,OAAO,EAAE4B,GAAG,CAACW;AAA/C,OAAzB;AACD;AACF;;AAED,SAAO,IAAP;AACD,CA1CD;;AA4CA3C,WAAW,CAACK,SAAZ,CAAsBuC,MAAtB,GAA+B,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AACzD,SAAO,KAAK3C,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,IAAAA,IAAI,EAAE,QAAP;AAAiBC,IAAAA,OAAO,EAAEyC;AAA1B,GAAzB,CAAP;AACD,CAFD;;AAIA7C,WAAW,CAACK,SAAZ,CAAsByC,UAAtB,GAAmC,SAASA,UAAT,CAAoBT,GAApB,EAAyBU,MAAzB,EAAiC;AAAA;;AAClE,MAAIC,6DAAK/B,iBAAL,iBAA+B8B,MAA/B,MAA2C,CAAC,CAAhD,EAAmD,OAAOpB,SAAP;AACnD,SAAO,KAAKzB,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACxB,IAAAA,IAAI,EAAE4C,MAAP;AAAe3C,IAAAA,OAAO,EAAEiC;AAAxB,GAA5B,CAAP;AACD,CAHD;;AAKArC,WAAW,CAACK,SAAZ,CAAsB4C,wBAAtB,GAAiD,SAASA,wBAAT,GAAoC;AACnF,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjC,iBAAL,CAAuBkC,MAA3C,EAAmDD,CAAC,EAApD,EAAwD;AACtD,QAAMH,MAAM,GAAG,KAAK9B,iBAAL,CAAuBiC,CAAvB,CAAf;AACA,QAAME,KAAK,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,gBAAgBP,MAAhB,GAAyB,IAAnD,CAAd;;AACA,QAAIK,KAAK,IAAIA,KAAK,CAACD,MAAN,GAAe,CAA5B,EAA+B;AAC7B,WAAK,IAAID,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGE,KAAK,CAACD,MAA1B,EAAkCD,EAAC,EAAnC,EAAuC;AACrCE,QAAAA,KAAK,CAACF,EAAD,CAAL,CAASK,UAAT,CAAoBC,WAApB,CAAgCJ,KAAK,CAACF,EAAD,CAArC;AACD;AACF;AACF;;AAED,SAAO,IAAP;AACD,CAZD;;AAcAlD,WAAW,CAACK,SAAZ,CAAsBoD,QAAtB,GAAiC,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;AACvD,MAAMC,IAAI,GAAG,IAAb;;AACA,MAAMC,UAAU,GAAGC,mCAAcF,IAAI,CAAC3C,oBAAnB,CAAnB;;AAEA,2CAAA0C,IAAI,MAAJ,CAAAA,IAAI,EAAK,UAASrB,GAAT,EAAc;AACrB,QAAMP,IAAI,GAAG6B,IAAI,CAACjC,YAAL,CAAkBW,GAAlB,CAAb;AACA,QAAMyB,WAAW,GAAGzB,GAAG,CAAC0B,KAAJ,CAAUJ,IAAI,CAACrC,kBAAf,CAApB;;AAEA,QAAIwC,WAAW,IAAIA,WAAW,CAACX,MAAZ,GAAqB,CAApC,IAAyCrB,IAAzC,IAAiDkB,6CAAAY,UAAU,MAAV,CAAAA,UAAU,EAAS9B,IAAT,CAAV,KAA6B,CAAC,CAAnF,EAAsF;AAAA;;AACpF,UAAMkC,IAAI,GAAGF,WAAW,CAAC,CAAD,CAAxB,CADoF;;AAGpF,UAAId,yDAAAW,IAAI,CAACzC,2BAAL,kBAAyC8C,IAAzC,MAAmD,CAAC,CAApD,IACJL,IAAI,CAACzB,QAAL,CAAczB,kBAAd,CAAiCD,OADjC,EAC0C;AACxCmD,QAAAA,IAAI,CAACzD,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACC,UAAAA,GAAG,EAAE,MAAN;AAAcC,UAAAA,IAAI,EAAEQ,GAApB;AAAyB4B,UAAAA,KAAK,EAAED,IAAhC;AAAsClC,UAAAA,IAAI,EAAEA;AAA5C,SAA5B;AACD,OANmF;;;AAQpF,UAAIkB,yDAAAW,IAAI,CAACxC,wBAAL,kBAAsC6C,IAAtC,MAAgD,CAAC,CAAjD,IACJL,IAAI,CAACzB,QAAL,CAActB,SAAd,CAAwBJ,OADxB,EACiC;AAC/BmD,QAAAA,IAAI,CAACzD,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACC,UAAAA,GAAG,EAAE,kBAAN;AAA0BC,UAAAA,IAAI,EAAEQ,GAAhC;AAAqC4B,UAAAA,KAAK,EAAED;AAA5C,SAA5B;AACD,OAXmF;;;AAapF,UAAIhB,yDAAAW,IAAI,CAACvC,oBAAL,kBAAkC4C,IAAlC,MAA4C,CAAC,CAA7C,IACJL,IAAI,CAACzB,QAAL,CAAcxB,MAAd,CAAqBF,OADrB,EAC8B;AAC5BmD,QAAAA,IAAI,CAACzD,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACxB,UAAAA,IAAI,EAAEwD,IAAI,CAACtC,gBAAL,CAAsB2C,IAAtB,CAAP;AAAoC5D,UAAAA,OAAO,EAAEiC;AAA7C,SAA5B;AACD;AACF;AACF,GAtBG,CAAJ;;AAwBA,SAAOsB,IAAP;AACD,CA7BD;;;AAgCA3D,WAAW,CAACK,SAAZ,CAAsB6D,YAAtB,GAAqC,SAASA,YAAT,CAAsB7B,GAAtB,EAA2B;AAC9D,SAAO,KAAKnC,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACC,IAAAA,GAAG,EAAE,WAAN;AAAmBC,IAAAA,IAAI,EAAEQ;AAAzB,GAA5B,CAAP;AACD,CAFD;;;AAIArC,WAAW,CAACK,SAAZ,CAAsB8D,mBAAtB,GAA4C,SAASA,mBAAT,GAA+B;AACzE,MAAMf,KAAK,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,uBAA1B,CAAd;;AACA,MAAIF,KAAK,IAAIA,KAAK,CAACD,MAAN,GAAe,CAA5B,EAA+B;AAC7B,SAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,KAAK,CAACD,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCE,MAAAA,KAAK,CAACF,CAAD,CAAL,CAASK,UAAT,CAAoBC,WAApB,CAAgCJ,KAAK,CAACF,CAAD,CAArC;AACD;AACF;;AACD,SAAO,IAAP;AACD,CARD;;;AAWAlD,WAAW,CAACK,SAAZ,CAAsB+D,eAAtB,GAAwC,SAASA,eAAT,CAAyBC,MAAzB,EAAiChC,GAAjC,EAA8D;AAAA,MAAxBiC,cAAwB,uEAAP,KAAO;AACpG,OAAKpE,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACC,IAAAA,GAAG,EAAE,WAAN;AAAmBC,IAAAA,IAAI,EAAEQ,GAAzB;AAA8BkC,IAAAA,QAAQ,EAAEF;AAAxC,GAA5B;;AAEA,MAAI,KAAKnC,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,QAAMgE,MAAM,GAAGF,cAAc,GAAG,EAAH,GAAQ,YAArC;AACA,SAAKpE,GAAL,CAAS,MAAT,EAAiByB,SAAjB,EAA4B;AAACS,MAAAA,QAAQ,EAAE,cAAcoC,MAAzB;AAAiCpE,MAAAA,OAAO,EAAEiE;AAA1C,KAA5B;AACD;;AAED,SAAO,IAAP;AACD,CATD;;;AAWArE,WAAW,CAACK,SAAZ,CAAsBoE,sBAAtB,GAA+C,SAASA,sBAAT,GAAkC;AAC/E,MAAMrB,KAAK,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,uBAA1B,CAAd;;AACA,MAAIF,KAAK,IAAIA,KAAK,CAACD,MAAN,GAAe,CAA5B,EAA+B;AAC7B,SAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,KAAK,CAACD,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCwB,MAAAA,MAAM,CAACxB,CAAD,CAAN,CAAUK,UAAV,CAAqBC,WAArB,CAAiCkB,MAAM,CAACxB,CAAD,CAAvC;AACD;AACF;;AAED,MAAI,KAAKhB,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,QAAMkE,MAAM,GAAGrB,QAAQ,CAACC,gBAAT,CAA0B,sCAA1B,CAAf;;AACA,QAAIoB,MAAM,IAAIA,MAAM,CAACvB,MAAP,GAAgB,CAA9B,EAAiC;AAC/B,WAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAACvB,MAA3B,EAAmCwB,CAAC,EAApC,EAAwC;AACtCD,QAAAA,MAAM,CAACC,CAAD,CAAN,CAAUpB,UAAV,CAAqBC,WAArB,CAAiCkB,MAAM,CAACC,CAAD,CAAvC;AACD;AACF;;AAED,QAAMC,IAAI,GAAGvB,QAAQ,CAACwB,aAAT,CAAuB,4BAAvB,CAAb;;AACA,QAAID,IAAJ,EAAU;AACRA,MAAAA,IAAI,CAACrB,UAAL,CAAgBC,WAAhB,CAA4BoB,IAA5B;AACD;AACF;;AAED,SAAO,IAAP;AACD,CAvBD;;AAyBA5E,WAAW,CAACK,SAAZ,CAAsByE,WAAtB,GAAoC,SAASA,WAAT,CAAqB9C,GAArB,EAA0B;AAAA;;AAC5D,MAAI,CAAC,KAAKC,QAAL,CAAcD,GAAd,CAAL,EAAyB,OAAO,IAAP;;AAEzB,MAAIA,GAAG,CAAC+C,KAAR,EAAe;AACb1B,IAAAA,QAAQ,CAAC0B,KAAT,GAAiB/C,GAAG,CAAC+C,KAArB;;AAEA,QAAI,KAAK7C,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,WAAKN,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,QAAAA,QAAQ,EAAE,UAAX;AAAuBhC,QAAAA,OAAO,EAAE4B,GAAG,CAAC+C;AAApC,OAA7B;AACD;;AAED,QAAI,KAAK7C,QAAL,CAAcpB,WAAd,CAA0BN,OAA9B,EAAuC;AACrC,WAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,QAAAA,IAAI,EAAE,eAAP;AAAwBC,QAAAA,OAAO,EAAE4B,GAAG,CAAC+C;AAArC,OAAzB;AACD;AACF;;AAED,MAAI/C,GAAG,CAACgD,WAAR,EAAqB;AACnB,SAAK9E,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,MAAAA,IAAI,EAAE,aAAP;AAAsBC,MAAAA,OAAO,EAAE4B,GAAG,CAACgD;AAAnC,KAAzB;;AAEA,QAAI,KAAK9C,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,WAAKN,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,QAAAA,QAAQ,EAAE,gBAAX;AAA6BhC,QAAAA,OAAO,EAAE4B,GAAG,CAACgD;AAA1C,OAA7B;AACD;;AAED,QAAI,KAAK9C,QAAL,CAAcpB,WAAd,CAA0BN,OAA9B,EAAuC;AACrC,WAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,QAAAA,IAAI,EAAE,qBAAP;AAA8BC,QAAAA,OAAO,EAAE4B,GAAG,CAACgD;AAA3C,OAAzB;AACD;AACF;;AAED,MAAIhD,GAAG,CAACK,GAAR,EAAa;AACX,QAAI,KAAKH,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,WAAKN,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,QAAAA,QAAQ,EAAE,QAAX;AAAqBhC,QAAAA,OAAO,EAAE4B,GAAG,CAACK;AAAlC,OAA7B;AACD;AACF;;AAED,MAAIL,GAAG,CAACiD,KAAR,EAAe;AACb,QAAMC,MAAM,GAAG,KAAKC,gBAAL,CAAsBnD,GAAG,CAACiD,KAA1B,CAAf;;AACA,QAAI,KAAK/C,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,WAAKN,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,QAAAA,QAAQ,EAAE,UAAX;AAAuBhC,QAAAA,OAAO,EAAE8E,MAAM,CAAC7C;AAAvC,OAA7B;;AAEA,UAAI6C,MAAM,CAACE,KAAX,EAAkB;AAChB,aAAKlF,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,UAAAA,QAAQ,EAAE,gBAAX;AAA6BhC,UAAAA,OAAO,EAAE8E,MAAM,CAACE;AAA7C,SAA7B;AACD;;AAED,UAAIF,MAAM,CAACG,MAAX,EAAmB;AACjB,aAAKnF,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,UAAAA,QAAQ,EAAE,iBAAX;AAA8BhC,UAAAA,OAAO,EAAE8E,MAAM,CAACG;AAA9C,SAA7B;AACD;AACF;;AAED,QAAI,KAAKnD,QAAL,CAAcpB,WAAd,CAA0BN,OAA9B,EAAuC;AACrC,WAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,QAAAA,IAAI,EAAE,eAAP;AAAwBC,QAAAA,OAAO,EAAE8E,MAAM,CAAC7C;AAAxC,OAAzB;AACD;AACF;;AAED,MAAIL,GAAG,CAACqC,MAAR,EAAgB;AACdhB,IAAAA,QAAQ,CAACwB,aAAT,CAAuB,MAAvB,EAA+BS,YAA/B,CAA4C,MAA5C,EAAoDtD,GAAG,CAACqC,MAAxD;;AAEA,QAAI,KAAKnC,QAAL,CAAcrB,aAAd,CAA4BL,OAAhC,EAAyC;AACvC,WAAKN,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,QAAAA,QAAQ,EAAE,WAAX;AAAwBhC,QAAAA,OAAO,EAAE4B,GAAG,CAACqC,MAAJ,CAAWkB,OAAX,CAAmB,GAAnB,EAAwB,GAAxB;AAAjC,OAA7B;AACD;AACF;;AAED,MAAIvD,GAAG,CAACwD,aAAR,EAAuB;AAAA;;AACrB,0FACQxD,GAAG,CAACwD,aADZ,mBAGI,UAAAC,CAAC;AAAA,aAAI,KAAI,CAACrB,eAAL,CACHqB,CADG,EACAzD,GAAG,CAACwD,aAAJ,CAAkBC,CAAlB,CADA,EACsBzD,GAAG,CAACqC,MAAJ,IAAcrC,GAAG,CAACqC,MAAJ,IAAcoB,CADlD,CAAJ;AAAA,KAHL;AAOD;;AAED,MAAIzD,GAAG,CAAC0D,UAAR,EAAoB;AAAA;;AAClB,yDAAA1D,GAAG,CAAC0D,UAAJ,kBAAmB,UAAAC,CAAC;AAAA,aAAI,KAAI,CAACzB,YAAL,CAAkByB,CAAlB,CAAJ;AAAA,KAApB;AACD;;AAED,SAAO,IAAP;AACD,CA3ED;;AA6EA3F,WAAW,CAACK,SAAZ,CAAsB8B,qBAAtB,GAA8C,SAASA,qBAAT,CAA+BH,GAA/B,EAAoC;AAChF,MAAI,CAAC,KAAKE,QAAL,CAActB,SAAd,CAAwBJ,OAA7B,EAAsC,OAAO,IAAP;AAEtC,OAAKN,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,IAAAA,IAAI,EAAE,8BAAP;AAAuCC,IAAAA,OAAO,EAAE;AAAhD,GAAzB;;AAEA,MAAI4B,GAAG,CAAC7B,IAAR,EAAc;AACZ,SAAKD,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,MAAAA,IAAI,EAAE,4BAAP;AAAqCC,MAAAA,OAAO,EAAE4B,GAAG,CAAC7B;AAAlD,KAAzB;AACD;;AAED,MAAI6B,GAAG,CAAC4D,cAAR,EAAwB;AACtB,SAAK1F,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,MAAAA,IAAI,EAAE,uCAAP;AAAgDC,MAAAA,OAAO,EAAE4B,GAAG,CAAC4D;AAA7D,KAAzB;AACD;;AAED,SAAO,IAAP;AACD,CAdD;;AAgBA5F,WAAW,CAACK,SAAZ,CAAsBwF,kBAAtB,GAA2C,SAASA,kBAAT,CAA4BxD,GAA5B,EAAiCyD,KAAjC,EAAwC;AACjF,SAAO,KAAK5F,GAAL,CAAS,MAAT,EAAiB,KAAjB,EAAwB;AAAC0B,IAAAA,GAAG,EAAE,WAAN;AAAmBC,IAAAA,IAAI,EAAEQ,GAAzB;AAA8ByD,IAAAA,KAAK,EAAEA,KAAK,IAAI;AAA9C,GAAxB,CAAP;AACD,CAFD;;AAIA9F,WAAW,CAACK,SAAZ,CAAsB0F,eAAtB,GAAwC,SAASA,eAAT,CAAyB/D,GAAzB,EAA8B;AACpE,MAAIA,GAAG,CAACgE,KAAR,EAAe;AACb,SAAK9F,GAAL,CAAS,MAAT,EAAiB,UAAjB,EAA6B;AAACkC,MAAAA,QAAQ,EAAE,WAAX;AAAwBhC,MAAAA,OAAO,EAAE4B,GAAG,CAACgE;AAArC,KAA7B;AACD;;AACD,SAAO,IAAP;AACD,CALD;;AAOAhG,WAAW,CAACK,SAAZ,CAAsB4F,cAAtB,GAAuC,SAASA,cAAT,CAAwBjE,GAAxB,EAA6B;AAClE,MAAI,CAAC,KAAKE,QAAL,CAAcpB,WAAd,CAA0BN,OAA/B,EAAwC,OAAO,IAAP;AAExC,MAAIwB,GAAG,CAACkE,IAAR,EACE,KAAKhG,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,IAAAA,IAAI,EAAE,cAAP;AAAuBC,IAAAA,OAAO,EAAE4B,GAAG,CAACkE;AAApC,GAAzB;AAEF,MAAIlE,GAAG,CAACmE,IAAR,EACE,KAAKjG,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,IAAAA,IAAI,EAAE,cAAP;AAAuBC,IAAAA,OAAO,EAAE4B,GAAG,CAACmE;AAApC,GAAzB;AAEF,MAAInE,GAAG,CAACoE,OAAR,EACE,KAAKlG,GAAL,CAAS,MAAT,EAAiB,MAAjB,EAAyB;AAACC,IAAAA,IAAI,EAAE,iBAAP;AAA0BC,IAAAA,OAAO,EAAE4B,GAAG,CAACoE;AAAvC,GAAzB;AACH,CAXD;;AAaApG,WAAW,CAACK,SAAZ,CAAsBgG,UAAtB,GAAmC,SAASA,UAAT,CAAoBC,IAApB,EAAsC;AAAA,MAAZC,KAAY,uEAAJ,EAAI;AACvE,MAAI,CAAC,KAAKrE,QAAL,CAAc3B,cAAd,CAA6BC,OAAlC,EAA2C,OAAO,IAAP;AAE3C,MAAMgG,CAAC,GAAG;AACR,aAAS,gBADD;AAER,uBAAmBC,yCAAAH,IAAI,MAAJ,CAAAA,IAAI,EAAK,UAAStE,GAAT,EAAc0E,KAAd,EAAqB;AAC/C,aAAO;AACL,iBAAS,UADJ;AAEL,oBAAYA,KAAK,GAAG,CAFf;AAGL,gBAAQ1E,GAAG,CAAC+C,KAHP;AAIL,gBAAQ/C,GAAG,CAACK;AAJP,OAAP;AAMD,KAPsB;AAFf,GAAV;AAYAvC,EAAAA,QAAQ,CAACyC,YAAT,CAAsBiE,CAAtB,EAAyBG,mCAAc,EAAd,EAAkB;AAAC,mBAAe,KAAhB;AAAuBnE,IAAAA,QAAQ,EAAE;AAAjC,GAAlB,EAA+D+D,KAA/D,CAAzB;AAEA,SAAO,IAAP;AACD,CAlBD;;AAoBAvG,WAAW,CAACK,SAAZ,CAAsB8E,gBAAtB,GAAyC,SAASA,gBAAT,CAA0ByB,KAA1B,EAAiC;AACxE,MAAI,OAAOA,KAAP,IAAgB,QAApB,EAA8B,OAAO;AAACvE,IAAAA,GAAG,EAAEuE;AAAN,GAAP,CAA9B,KACK,IAAI,KAAK3E,QAAL,CAAc2E,KAAd,CAAJ,EAA0B,OAAO;AACpCvE,IAAAA,GAAG,EAAEuE,KAAK,CAACvE,GADyB;AAEpC+C,IAAAA,KAAK,EAAEwB,KAAK,CAACxB,KAFuB;AAGpCC,IAAAA,MAAM,EAAEuB,KAAK,CAACvB;AAHsB,GAAP,CAA1B,KAKA,OAAO,EAAP;AACN,CARD;;AAUArF,WAAW,CAACK,SAAZ,CAAsBqB,YAAtB,GAAqC,SAASA,YAAT,CAAsBF,IAAtB,EAA4B;AAC/D,MAAMqF,OAAO,GAAGC,iDAAAtF,IAAI,MAAJ,CAAAA,IAAI,EAAa,GAAb,CAApB;;AACA,MAAIqF,OAAO,GAAG,CAAd,EAAiB,OAAOlF,SAAP;;AAEjB,MAAMoF,GAAG,GAAGC,2CAAAxF,IAAI,MAAJ,CAAAA,IAAI,EAAOqF,OAAO,GAAG,CAAjB,CAAhB;;AACA,MAAI,CAACE,GAAL,EAAU,OAAOpF,SAAP;AAEV,SAAO,KAAKX,oBAAL,CAA0B+F,GAA1B,KAAkCpF,SAAzC;AACD,CARD;;AAUA3B,WAAW,CAACK,SAAZ,CAAsBH,GAAtB,GAA4B,SAASA,GAAT,CAAa+G,GAAb,EAAkBxE,EAAlB,EAAkC;AAAA,MAAZ8D,KAAY,uEAAJ,EAAI;;AAC5D,MAAI9D,EAAJ,EAAQ;AACN,QAAMyE,YAAY,GAAG,KAAKC,UAAL,CAAgBF,GAAG,GAAG,GAAN,GAAYxE,EAAZ,GAAiB,IAAjB,GAAwB8D,KAAK,CAAC9D,EAAD,CAA7B,GAAoC,IAApD,CAArB;AACA,QAAIyE,YAAJ,EAAkBA,YAAY,CAAC3D,UAAb,CAAwBC,WAAxB,CAAoC0D,YAApC;AACnB;;AAED,MAAMtC,IAAI,GAAG,KAAKwC,aAAL,CAAmBH,GAAnB,EAAwBV,KAAxB,CAAb;AAEA,OAAKc,KAAL,CAAWzC,IAAX;AAEA,SAAOA,IAAP;AACD,CAXD;;AAaA5E,WAAW,CAACK,SAAZ,CAAsB8G,UAAtB,GAAmC,SAASA,UAAT,CAAoBG,KAApB,EAA2B;AAC5D,SAAOjE,QAAQ,CAACwB,aAAT,CAAuByC,KAAvB,CAAP;AACD,CAFD;;AAIAtH,WAAW,CAACK,SAAZ,CAAsB+G,aAAtB,GAAsC,SAASA,aAAT,CAAuBH,GAAvB,EAA4BV,KAA5B,EAAmC;AACvE,MAAM3B,IAAI,GAAGvB,QAAQ,CAAC+D,aAAT,CAAuBH,GAAvB,CAAb;;AACA,MAAI,KAAKhF,QAAL,CAAcsE,KAAd,CAAJ,EAA0B;AAAA;;AACxB,0FAAYA,KAAZ,mBAAuB,UAAAgB,IAAI;AAAA,aAAI3C,IAAI,CAACU,YAAL,CAAkBiC,IAAlB,EAAwBhB,KAAK,CAACgB,IAAD,CAA7B,CAAJ;AAAA,KAA3B;AACD;;AACD,SAAO3C,IAAP;AACD,CAND;;AAQA5E,WAAW,CAACK,SAAZ,CAAsBgH,KAAtB,GAA8B,SAASA,KAAT,CAAezC,IAAf,EAAqB;AACjDvB,EAAAA,QAAQ,CAACmE,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,YAAzC,CAAsD7C,IAAtD,EAA4D,IAA5D;AACD,CAFD;;AAIA5E,WAAW,CAACK,SAAZ,CAAsBJ,SAAtB,GAAkC,SAASA,SAAT,GAAsC;AAAA;;AAAA,MAAnByH,YAAmB,uEAAJ,EAAI;AACtE,MAAMpH,eAAe,GAAG,KAAKA,eAA7B;AACA,OAAK4B,QAAL,GAAgByF,yFACR,KAAKrH,eADG,mBAEN,UAASsH,IAAT,EAAezH,IAAf,EAAqB;AAC3ByH,IAAAA,IAAI,CAACzH,IAAD,CAAJ,GAAauH,YAAY,CAACvH,IAAD,CAAZ,IAAuBG,eAAe,CAACH,IAAD,CAAf,IAAyB,EAA7D;AACA,WAAOyH,IAAP;AACD,GALa,EAKX,EALW,CAAhB;AAMD,CARD;;AAUA5H,WAAW,CAACK,SAAZ,CAAsB4B,QAAtB,GAAiC,SAASA,QAAT,CAAkB4F,CAAlB,EAAqB;AACpD,SAAOC,MAAM,CAACzH,SAAP,CAAiB0H,QAAjB,CAA0BC,IAA1B,CAA+BH,CAA/B,MAAsC,iBAA7C;AACD,CAFD;;AAIA,YAAe,IAAI7H,WAAJ,EAAf;;;;"}